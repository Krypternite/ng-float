!function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var i={};return e.m=t,e.c=i,e.p="/",e(0)}(function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))switch(typeof t[e]){case"function":break;case"object":t[e]=function(e){var i=e.slice(1),n=t[e[0]];return function(t,e,o){n.apply(this,[t,e,o].concat(i))}}(t[e]);break;default:t[e]=t[t[e]]}return t}([function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(1),r=n(o),s=i(2),a=n(s),u=i(7),l=n(u),f=i(13),h=n(f);i(14),e["default"]=r["default"].module("float",[]).directive("flContainer",a["default"]).directive("flItem",l["default"]).factory("Mapper",h["default"])},function(t,e){t.exports=angular},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();e["default"]=function(){return{restrict:"A",bindToController:{options:"=flContainer",isEditable:"=flEditable",createElementsAtPosition:"&flCreateElementsAtPosition"},controllerAs:"flContainer",controller:["Mapper","$element","$document","$scope","$timeout",function(){function t(e,i,n,r,s){o(this,t),this.flItems=[],this.mapper=new e(this.options),this.$element=i,this.$timeout=s,this.$element.css("width",this.mapper.width),this.isEditable&&(this.setupDropListeners(),this.setupVisitListeners(n,r))}return r(t,[{key:"initItem",value:function(t){var e=this;this.flItems.push(t),this.container?(this.container.addItem(t.item),this.render()):t.lastRepeat&&(this.container=new h["default"](this.flItems.map(function(t){return t.item})),this.$timeout(function(){e.render()}))}},{key:"render",value:function(){var t=this;this.container.removeGaps(),this.$element.css("height",this.mapper.height2px(this.container.getMaxHeight())+100),this.flItems.forEach(function(e){return e.render(t.mapper.layout2px(e.item),{left:e.item.left,top:e.item.top,width:e.item.width,height:e.item.height})})}},{key:"onItemEditStart",value:function(){this.$element.css("height",this.$element.height()+1e3)}},{key:"onItemEditEnd",value:function(t,e){this.container.editItem(t,e),this.render()}},{key:"onItemRemove",value:function(t){this.container.removeItem(t),this.render()}},{key:"getNewItemDimensions",value:function(t){return this.container.getClosestTop(this.mapper.getClosestPosition(t))}},{key:"setupDropListeners",value:function(){function t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1e4,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1e4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;i.css({marginLeft:t,marginTop:e,width:n})}var e=this,i=(0,a["default"])("<div>").addClass("fl-drop-indicator").appendTo(this.$element);t();var n=l["default"].throttle(function(i){if((0,a["default"])(i.target).is(e.$element)){var n=e.mapper.px2pos({left:i.offsetX,top:i.offsetY}),o=Object.assign(n,e.container.getWidthAtPos(n));if(o.height=e.mapper.minHeight,o.width=Math.min(o.width,e.mapper.numColumns-o.left),o.width<e.mapper.minWidth)t();else{var r=e.mapper.layout2px(e.mapper.checkPositionConstraints(o));t(r.left,r.top,r.width)}}else t()},50);this.$element.on("dragover",function(t){t.preventDefault(),t.stopPropagation(),n(t)}),this.$element.on("dragleave",function(e){e.preventDefault(),e.stopPropagation(),n.cancel(),t()}),this.$element.on("drop",function(i){if(i.preventDefault(),i.stopPropagation(),n.cancel(),t(),(0,a["default"])(i.target).is(e.$element)){var o=e.mapper.px2pos({left:i.offsetX,top:i.offsetY}),r=Object.assign(o,e.container.getWidthAtPos(o));if(r.height=e.mapper.minHeight,r.width>=e.mapper.minWidth){r.width=Math.min(r.width,e.mapper.numColumns-r.left);var s=e.mapper.checkPositionConstraints(r);e.createElementsAtPosition({event:i,dimensions:s})}}})}},{key:"setupVisitListeners",value:function(t,e){function i(t){var e=(0,a["default"])(t.target).closest("[fl-item]").eq(0);e&&e.addClass("fl-item-selected"),(0,a["default"])("[fl-item]").not(e).removeClass("fl-item-selected")}t.on("click",i),e.$on("$destroy",function(){t.off("click",i)})}}]),t}()]}};var s=i(3),a=n(s),u=i(4),l=n(u),f=i(5),h=n(f)},function(t,e){t.exports=jQuery},function(t,e){t.exports=_},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(u){o=!0,r=u}finally{try{!n&&a["return"]&&a["return"]()}finally{if(o)throw r}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(6),u=n(a),l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];o(this,t),this.rows=this.itemsToRows(e)}return s(t,[{key:"itemsToRows",value:function(t){var e=this,i={};return t.forEach(function(t){t.top in i?i[t.top].push(t):i[t.top]=[t]}),Object.entries(i).map(function(t){var i=r(t,2),n=i[0],o=i[1];return new u["default"](o,Number(n),e)}).sort(function(t,e){return t.top-e.top})}},{key:"addItem",value:function(t){var e=void 0,i=void 0;for(e=0;e<this.rows.length;e++){if(!(this.rows[e].top<t.top)){this.rows[e].top===t.top&&(i=this.rows[e]);break}t.top+=this.rows[e].getOverlap(t,!1)}i&&!i.getOverlap(t,!0)?i.addItem(t):this.rows.splice(e,0,new u["default"]([t],t.top,this));for(var n=e+1;n<this.rows.length;n++)this.shiftRows(this.rows.slice(n),this.rows[n].getOverlap(t,!0))}},{key:"editItem",value:function(t,e){this.removeItem(t),this.addItem(Object.assign(t,e))}},{key:"removeItem",value:function(t){var e=t.row;e.removeItem(t),0===e.items.length&&this.rows.splice(this.rows.indexOf(e),1)}},{key:"shiftRows",value:function(t,e){t.forEach(function(t){return t.setTop(t.top+e)})}},{key:"removeGaps",value:function(){if(0!==this.rows.length){0!==this.rows[0].top&&this.shiftRows(this.rows,-this.rows[0].top);for(var t=0,e=1;e<this.rows.length;e++){t=Math.max(t,this.rows[e-1].top+this.rows[e-1].getHeight());var i=this.rows[e].top-t;i>0&&this.shiftRows(this.rows.slice(e),-i)}}}},{key:"getMaxHeight",value:function(){return this.rows.reduce(function(t,e){return Math.max.apply(void 0,[t].concat(e.items.map(function(t){return t.top+t.height})))},0)}},{key:"getClosestTop",value:function(t){if(0===this.rows.length)t.top=0;else for(var e=this.rows.length-1;e>=0;e--)if(this.rows[e].top<t.top){t.top=this.rows[e].top,t.top+=this.rows[e].getOverlap(t,!1);break}return t}},{key:"getWidthAtPos",value:function(t){var e=t.left,i=t.top,n=0,o=1/0;return this.rows.forEach(function(t){return!(t.top>=i)&&void t.items.forEach(function(t){t.top+t.height>i&&(t.left<e?n=Math.max(n,t.left+t.width):o=Math.min(o,t.left))})}),{left:n,width:o-n}}}]),t}();e["default"]=l},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(){function t(e,n){var o=this;i(this,t),this.top=n,this.items=e,e.forEach(function(t){return t.row=o})}return n(t,[{key:"addItem",value:function(t){this.items.push(t),t.row=this}},{key:"removeItem",value:function(t){var e=this.items.indexOf(t);t.row=null,this.items.splice(e,1)}},{key:"setTop",value:function(t){var e=this;this.top=t,this.items.forEach(function(t){return t.top=e.top})}},{key:"getHeight",value:function(){return this.items.reduce(function(t,e){return Math.max(t,e.height)},0)}},{key:"getOverlap",value:function(t,e){var i=0;return this.items.forEach(function(n){n.doesOverlap(t)&&(i=e?Math.max(i,t.top+t.height-n.top):Math.max(i,n.top+n.height-t.top))}),i}}]),t}();e["default"]=o},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(u){o=!0,r=u}finally{try{!n&&a["return"]&&a["return"]()}finally{if(o)throw r}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();e["default"]=function(){return{restrict:"A",require:["^flContainer","flItem"],bindToController:{layout:"=flItem",resizable:"=flResizable",getHeight:"=flGetHeight",lastRepeat:"=flLastRepeat"},controllerAs:"flItem",controller:["$element",function(){function t(e){o(this,t),this.$element=e,this.item=new f["default"](this.layout.left,this.layout.top,this.layout.width,this.layout.height)}return s(t,[{key:"render",value:function(t,e){this.$element.css(t),Object.assign(this.layout,e)}}]),t}()],link:function(t,e,i,n){function o(){var i=(0,u["default"])("<"+e[0].nodeName.toLowerCase()+">").addClass("fl-drag-indicator fl-item"),n=(0,u["default"])("<div>").addClass("fl-drag-clone");n.append(i);var o={};e.draggable({cursor:"move",cancel:"[fl-drag-cancel]",helper:function(){return n},start:function(r){o.width=e.outerWidth(),o.height=e.outerHeight(),n.css(h.mapper.layout2px(c.item)),i.css(h.mapper.layout2px(c.item)),e.children().clone().appendTo(i),h.onItemEditStart(),t.$broadcast("flDragStart",r)},drag:function(t,e){var n=h.mapper.layout2px(h.mapper.getClosestPosition(Object.assign(o,e.position)));i.css({left:n.left-e.position.left,top:n.top-e.position.top})},stop:function(e,n){i.empty(),h.onItemEditEnd(c.item,h.mapper.getClosestPosition(Object.assign(o,n.position))),t.$broadcast("flDragStop",e)}})}function s(){function i(t){var i=h.mapper.getClosestSize(Object.assign(t.position,t.size),e.data("ui-resizable").axis.includes("w"));return l(i,!0)}if(p){var n=void 0;e.resizable({classes:{"ui-resizable-handle":"fl-resizable","ui-resizable-se":""},start:function(e){n=(0,u["default"])("<div>").addClass("fl-resize-indicator fl-item"),n.css(h.mapper.layout2px(c.item)),n.appendTo("[fl-container]"),h.onItemEditStart(),t.$broadcast("flResizeStart",e)},resize:function(t,e){n.css(h.mapper.layout2px(i(e)))},stop:function(e,o){n.remove(),h.onItemEditEnd(c.item,i(o)),t.$broadcast("flResizeStop",e)}}),a()}}function a(){e.resizable("option","handles",1===p?"e, w":"e, se, s, sw, w")}function l(t,i){if(c.getHeight){var n=h.mapper.layout2px(t),o=c.getHeight(e,n.width,i);if(o>n.height)return n.height=o,h.mapper.px2layout(n)}return t}var f=r(n,2),h=f[0],c=f[1],p=c.resizable;h.initItem(c),e.addClass("fl-item"),h.isEditable&&(e.addClass("fl-edit"),o(),s(),t.$on("$destroy",function(){h.onItemRemove(c.item)}),t.$on("flItemChanged",function(){var t=l(c.item,!1);t.height!==c.item.height&&h.onItemEditEnd(c.item,t)}),t.$on("flResizeChanged",function(t,e){p=e,a()}))}}};var a=i(3),u=n(a),l=i(8),f=n(l);i(9)},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(){function t(e,n,o,r){i(this,t),this.left=e,this.top=n,this.width=o,this.height=r,this.row=null}return n(t,[{key:"doesOverlap",value:function(t){return!(this.left+this.width<=t.left||t.left+t.width<=this.left||this.top+this.height<=t.top||t.top+t.height<=this.top)}}]),t}();e["default"]=o},function(t,e){},,,,function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(){return r}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();e["default"]=n;var r=function(){function t(e){var n=e.width,o=void 0===n?768:n,r=e.rowHeight,s=void 0===r?15:r,a=e.numColumns,u=void 0===a?60:a,l=e.buffer,f=void 0===l?4:l,h=e.minHeight,c=void 0===h?4:h,p=e.minWidth,d=void 0===p?10:p;i(this,t),this.width=o,this.numColumns=u,this.buffer=f,this.rowHeight=s,this.minHeight=c,this.minWidth=d,this.colWidth=(o-(u-1)*f)/u+f}return o(t,[{key:"px2layout",value:function(t){var e=t.left,i=t.top,n=t.width,o=t.height,r=this.px2pos({left:e,top:i}),s=Math.ceil((this.left2px(r.left)+n)/this.colWidth),a=Math.ceil((this.top2px(r.top)+o+this.buffer)/this.rowHeight);return{left:r.left,top:r.top,width:s-r.left,height:a-r.top}}},{key:"layout2px",value:function(t){var e=t.left,i=t.top,n=t.width,o=t.height;return{left:this.left2px(e),top:this.top2px(i),width:this.width2px(n),height:this.height2px(o)}}},{key:"px2pos",value:function(t){var e=t.left,i=t.top;return{left:this._closestMultiple(e,this.colWidth),top:this._closestMultiple(i,this.rowHeight)}}},{key:"left2px",value:function(t){return t*this.colWidth}},{key:"top2px",value:function(t){return t*this.rowHeight}},{key:"width2px",value:function(t){return t*this.colWidth-this.buffer}},{key:"height2px",value:function(t){return t*this.rowHeight-this.buffer}},{key:"getClosestPosition",value:function(t){return this.checkPositionConstraints(this.px2layout(t))}},{key:"getClosestSize",value:function(t,e){return this.checkSizeConstraints(this.px2layout(t),e)}},{key:"checkPositionConstraints",value:function(t){var e=t.width,i=t.height,n=t.left,o=t.top;return n+e>this.numColumns&&(n=this.numColumns-e),n<0&&(n=0),o<0&&(o=0),{left:n,top:o,width:e,height:i}}},{key:"checkSizeConstraints",value:function(t,e){var i=t.width,n=t.height,o=t.left,r=t.top;if(o+i>this.numColumns&&(i=this.numColumns-o),o<0){var s=o+i;o=0,i=s-o}return i<this.minWidth&&(e&&(o-=this.minWidth-i),i=this.minWidth),n<this.minHeight&&(n=this.minHeight),{left:o,top:r,width:i,height:n}}},{key:"_closestMultiple",value:function(t,e){var i=t/e,n=Math.floor(i),o=Math.ceil(i);return i-n>o-i?o:n}}]),t}()},9]));